<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cin√©Lingua ‚Äî Cultural Film Recommendation</title>
    <meta
      name="description"
      content="Choose a language (required), optionally pick preferences for personalization, then print your movie ticket."
    />
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='movie-icone-ticket-removebg.png') }}"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>

  <body>
    <div class="grain" aria-hidden="true"></div>

    <header class="masthead">
      <div class="brand">
        <img
          class="brand__logo"
          src="{{ url_for('static', filename='movie-icone-ticket-removebg.png') }}"
          alt="Cinema ticket icon"
        />
        <div class="brand__text">
          <h1 class="brand__title">Cin√©Lingua</h1>
          <p class="brand__tagline">
            The ticket booth that recommends movies in the language you're
            learning.
          </p>
        </div>
      </div>

      <div class="masthead__actions">
        <a href="/about" class="btn btn--ghost">About</a>
        <a class="btn btn--ghost" href="{{ url_for('stats_page') }}"
          >üìä Stats</a
        >

        <button
          id="themeBtn"
          class="btn btn--ghost"
          type="button"
          aria-pressed="false"
          title="Switch theme"
        >
          üåô Dark Mode
        </button>

        <button
          id="openPrefsBtn"
          class="btn btn--ghost"
          type="button"
          title="Edit preferences used for personalization"
        >
          ‚öôÔ∏è Preferences <span id="prefCount" class="pill">0</span>
        </button>

        <button
          id="openFavBtn"
          class="btn btn--ghost"
          type="button"
          title="View favorites"
        >
          ‚ô• Favorites <span id="favCount" class="pill">0</span>
        </button>
      </div>
    </header>

    <main class="stage-vertical">
      <section class="booth-vertical">
        <div class="panel panel--paper">
          <!-- ‚úÖ Intro box: in English, describes the project + clarifies filters -->
          <div class="intro-callout" role="note" aria-label="Introduction">
            <div class="intro-callout__left">
              <h3 class="intro-callout__title">üé¨ Welcome to Cin√©Lingua</h3>
              <p class="intro-callout__text">
                Cin√©Lingua is a cultural movie recommendation project designed
                for language learners. It helps you discover films in your
                target language while exploring cinema beyond mainstream
                algorithms.
              </p>
              <p class="intro-callout__text">
                <strong>Only the language is required.</strong> All other
                filters are optional ‚Äî use them only if you want to narrow down
                results.
              </p>
              <ol class="intro-callout__steps">
                <li><strong>Pick a language</strong> (required)</li>
                <li>
                  <strong>Optional:</strong> genres / rating / runtime / years /
                  level
                </li>
                <li>
                  Click <strong>üñ®Ô∏è Print My Ticket</strong> to show all matching
                  films
                </li>
              </ol>
              <p class="intro-callout__hint">
                Tip: click <strong>‚ô•</strong> on any movie card to save it to
                <strong>Favorites</strong>.
              </p>
            </div>

            <div class="intro-callout__right">
              <div class="intro-callout__pill">
                ‚ô• Favorites
                <small>Save movies for later</small>
              </div>
              <div class="intro-callout__pill">
                ‚≠ê Booth Picks
                <small>Optional: improves ‚ÄúBest for you‚Äù sorting</small>
              </div>
            </div>
          </div>

          <div class="panel__head">
            <h2 class="panel__title">üéüÔ∏è The Ticket Booth</h2>
            <p class="panel__sub">
              <strong>Language is required.</strong> Everything else is
              optional.
              <br />
              <strong>Preferences (optional)</strong> help the
              <em>‚ÄúBest for you‚Äù</em> sorting
            </p>
          </div>

          <form id="filters" class="form">
            <div class="field">
              <label class="label" for="langSelect"
                >1) Language (required)</label
              >
              <select id="langSelect" class="control">
                <option value="">‚Äî Choose a language ‚Äî</option>
              </select>
              <div id="langInfo" class="hint">
                Language is the only required filter. Genres / rating / duration
                / year are optional.
              </div>
            </div>

            <!-- Booth Picks (Preferences) -->
            <div class="booth-picks" id="tasteBlock" hidden>
              <div class="booth-picks__head">
                <div>
                  <h3 class="booth-picks__title">
                    ‚≠ê Booth Picks (famous films)
                  </h3>
                  <p class="booth-picks__sub">
                    <strong>Tip:</strong> pick at least
                    <strong>3</strong> preferences for better personalization.
                    <br />
                    Optional: tap ‚ô• on movies you love. This trains the
                    <em>‚ÄúBest for you‚Äù</em> sorting. (Same list for everyone,
                    independent of language.) It takes a few seconds to load,
                    please wait.
                  </p>
                </div>

                <button id="clearPrefsBtn" class="btn btn--ghost" type="button">
                  Clear all
                </button>
              </div>

              <div id="boothPicks" class="picks-grid" aria-live="polite"></div>
            </div>

            <div class="field">
              <label class="label" for="genreInput">2) Genres</label>

              <div class="tagbox" id="tagbox">
                <div
                  id="tagList"
                  class="tagbox__tags"
                  aria-label="Selected genres"
                ></div>
                <input id="genreInput" class="tagbox__input" />
              </div>

              <div class="hint">Available genres (for chosen language):</div>
              <div
                id="genreSuggestions"
                class="suggestions"
                aria-label="Genre suggestions"
              ></div>
            </div>

            <div class="grid">
              <div class="field">
                <label class="label" for="minRating">Minimum rating /10</label>
                <input
                  id="minRating"
                  class="control"
                  inputmode="decimal"
                  placeholder="ex: 6.5"
                />
              </div>

              <div class="field">
                <label class="label" for="maxRuntime">Max duration (min)</label>
                <input
                  id="maxRuntime"
                  class="control"
                  inputmode="numeric"
                  placeholder="ex: 120"
                />
              </div>

              <div class="field">
                <label class="label" for="yearMin">Year min</label>
                <input
                  id="yearMin"
                  class="control"
                  inputmode="numeric"
                  placeholder="ex: 1990"
                />
              </div>

              <div class="field">
                <label class="label" for="yearMax">Year max</label>
                <input
                  id="yearMax"
                  class="control"
                  inputmode="numeric"
                  placeholder="ex: 2020"
                />
              </div>

              <div class="field">
                <label class="label" for="linguisticLevel"
                  >Linguistic level</label
                >
                <select id="linguisticLevel" class="control">
                  <option value="">Any level</option>
                </select>
              </div>

              <!-- ‚úÖ Number of films removed -->
            </div>

            <div class="actions">
              <button id="resetBtn" class="btn btn--ghost" type="button">
                Clear Optional Filters
              </button>
              <button id="printBtn" class="btn btn--primary" type="submit">
                üñ®Ô∏è Print My Ticket
              </button>
            </div>
          </form>
        </div>
      </section>

      <section class="screen-vertical">
        <div class="panel panel--velvet">
          <div class="panel__head panel__head--row">
            <div>
              <h2 class="panel__title">üìΩÔ∏è The Cinema Screen</h2>
              <p id="resultsMeta" class="panel__sub">
                Your movie recommendations will appear here (preferences are
                optional).
              </p>
            </div>

            <div class="mini-actions mini-actions--row">
              <!-- ‚úÖ Count of matching films -->
              <span
                class="pill pill--count"
                id="matchCount"
                title="Matching films"
                >0</span
              >

              <select
                id="sortSelect"
                class="control control--mini"
                title="Sort results"
              >
                <option value="personal">üß† Sort: Best for you</option>
                <option value="rating">‚≠ê Sort: Highest rated</option>
                <option value="popular">üî• Sort: Popularity</option>
                <option value="recent">üï∞Ô∏è Sort: Newest</option>
                <option value="oldest">üèõÔ∏è Sort: Oldest</option>
              </select>

              <button id="shuffleBtn" class="btn btn--ghost" type="button">
                üé≤ Surprise Me
              </button>
            </div>
          </div>

          <div id="activeChips" class="chips" aria-label="Active filters"></div>

          <!-- ‚úÖ Tip to make Favorites obvious -->
          <p class="screen-tip" id="screenTip">
            Tip: tap <strong>‚ô•</strong> on any movie card to save it to your
            Favorites.
          </p>

          <div class="ticket-slot">
            <div id="ticketPrinter" class="printer" aria-hidden="true"></div>
            <div id="cards" class="cards" aria-live="polite"></div>

            <div class="loadmore" id="loadMoreWrap" hidden>
              <p class="loadmore__meta" id="loadMoreMeta">Showing 0 of 0</p>
              <button id="loadMoreBtn" class="btn btn--ghost" type="button">
                Load more
              </button>
            </div>

            <div id="emptyState" class="empty" hidden>
              <div class="empty__content">
                <h3>üé¨ The Screen Is Empty</h3>
                <p>No movies match your current criteria. Try:</p>
                <ul>
                  <li>Select a different language</li>
                  <li>Remove some genre filters</li>
                  <li>Lower the minimum rating</li>
                  <li>Increase the maximum duration</li>
                  <li>Widen the year range</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <dialog id="movieDialog" class="dialog">
      <form method="dialog" class="dialog__inner">
        <button class="dialog__close" aria-label="Close">‚úï</button>

        <div class="dialog__content">
          <div class="poster" aria-hidden="true"></div>

          <div class="dialog__text">
            <h3 id="dialogTitle" class="dialog__title"></h3>
            <p id="dialogSub" class="dialog__sub"></p>
            <p id="dialogOverview" class="dialog__overview"></p>
            <div id="dialogMeta" class="badges"></div>

            <div class="dialog__actions">
              <button id="dialogFavBtn" class="btn btn--ghost" type="button">
                ‚ô• Favorite
              </button>
              <button class="btn btn--primary" value="close">Close</button>
            </div>
          </div>
        </div>
      </form>
    </dialog>

    <!-- Favorites drawer -->
    <aside id="favDrawer" class="drawer" aria-hidden="true">
      <div class="drawer__head">
        <h2 class="drawer__title">‚ô• My Favorites</h2>
        <button id="closeFavBtn" class="btn btn--ghost" type="button">
          Close
        </button>
      </div>

      <div id="favList" class="fav"></div>

      <div class="drawer__foot">
        <button id="clearFavBtn" class="btn btn--ghost" type="button">
          Clear All
        </button>
      </div>
    </aside>

    <!-- Preferences drawer -->
    <aside id="prefsDrawer" class="drawer" aria-hidden="true">
      <div class="drawer__head">
        <h2 class="drawer__title">‚öôÔ∏è Preferences (for ‚ÄúBest for you‚Äù)</h2>
        <button id="closePrefsBtn" class="btn btn--ghost" type="button">
          Close
        </button>
      </div>

      <div class="fav" id="prefsList"></div>

      <div class="drawer__foot">
        <button id="clearPrefsDrawerBtn" class="btn btn--ghost" type="button">
          Clear All
        </button>
      </div>
    </aside>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
  </body>
</html>
